# Chapter 01. 리눅스의 이해
### 리눅스란 무엇인가?
![[Pasted image 20240719013457.png]]
리눅스는 리누스 토르발스(Linus Torvalds)가 1991년에 개발한 운영체제(OS)로, 유닉스(Unix)를 기반으로 한 오픈 소스 운영체제

#### 특징
- 단일형 커널(kernel) 
- 다양한 응용 프로그램 구성
- GNU 프로젝트의 라이선스인 GPL(General Public License) 하에 배포됨

#### 주요 원칙
- 자유 소프트웨어의 배포
- 소스 코드 공개
- 협력과 공유를 통한 발전


#### 커널(Kernel)?
- 운영체제의 핵심 소프트웨어
- 운영체제의 가장 아래 계층에서 동작함
- 기능
	- 하드웨어의 자원 분배(디바이스 드라이버)
	- 프로세스 제어
	- 메모리 제어
	- 네트워킹
	- 시스템 콜
![[Pasted image 20240719022048.png]]
- 리눅스 아키텍처
    - 리눅스 커널은 크게 핵심 부분과 모듈로 나뉨. 핵심 부분은 주요 기능을 담당하며, 모듈은 필요에 따라 동적으로 추가되거나 제거될 수 있는 확장 기능을 제공합니다. 이 아키텍처는 다양한 하드웨어 플랫폼에서 동작할 수 있도록 설계되어 있습니다.
- CPU 아키텍처
    - 리눅스는 다양한 CPU 아키텍처를 지원합니다. x86 아키텍처는 인텔과 AMD 프로세서를 포함하여 대부분의 개인용 컴퓨터에서 사용됩니다. ARM 아키텍처는 모바일 장치와 임베디드 시스템에서 널리 사용되며, RISC-V는 오픈 소스 기반의 ISA(Instruction Set Architecture)를 기반으로 하는 새로운 아키텍처입니다.
- 커널 구성요소
    - 프로세스 관리: 리눅스는 다중 프로세스 및 스레드를 관리하며, 프로세스 스케줄링을 통해 CPU 자원을 효율적으로 할당합니다.
    - 메모리 관리: 물리적 메모리 할당 및 가상 메모리 관리를 통해 프로세스가 필요로 하는 메모리를 관리하고 최적화합니다.
    - 네트워킹: TCP/IP 스택을 포함한 다양한 네트워크 프로토콜을 지원하여 네트워크 연결을 관리하고 데이터 전송을 처리합니다.
    - 파일시스템: 파일 및 디렉터리의 생성, 읽기, 쓰기, 삭제 등 파일 시스템 작업을 수행하여 데이터를 관리합니다.
    - 디바이스 드라이버: 하드웨어 장치와의 상호작용을 위한 드라이버를 제공하여 커널과 하드웨어 간의 인터페이스 역할을 합니다.
    - 시스템 콜: 유저 모드 프로세스가 커널 서비스에 접근할 수 있는 인터페이스를 제공하여 프로세스 간 통신과 자원 관리를 지원합니다.
- 커널 확장
    - 모듈: 필요에 따라 커널에 동적으로 추가되는 기능 단위입니다. 예를 들어, 특정 하드웨어 지원을 위한 드라이버나 추가적인 파일 시스템 지원 등이 모듈로 구현될 수 있습니다.
    - eBPF: Extended Berkeley Packet Filter의 약자로, 초기에는 네트워크 패킷 필터링 기능을 위해 만들어졌으나 현재는 범용적인 프로그래밍 인터페이스로 발전하였습니다. eBPF는 커널 내에서 실행되며 네트워크 처리, 보안 감시, 성능 분석 등 다양한 기능을 동적으로 확장할 수 있는 현대적인 방법입니다.

#### 점유율
- 데스크톱
![[Pasted image 20240719020544.png]]

- 슈퍼 컴퓨터 (or 서버) 
![[Pasted image 20240719020704.png]]


#### 특징

| 특징     | 설명                             |
| ------ | ------------------------------ |
| 오픈 소스  | 소스 코드를 자유롭게 수정, 배포 가능          |
| 다중 사용자 | 여러 사용자가 동시에 시스템 사용             |
| 다중 작업  | 여러 작업을 동시에 수행                  |
| 이식성    | 다양한 하드웨어 플랫폼에서 실행 가능           |
| 보안성    | 파일 시스템과 사용자 권한 관리가 뛰어나 보안성이 높음 |
| 네트워킹   | 네트워크 기능이 우수하며, 서버 운영체제로 많이 사용  |

#### 장단점

| 장점               | 단점                       |
| ---------------- | ------------------------ |
| 비용 절감 (무료 배포)    | 일부 상용 소프트웨어와의 호환성 문제     |
| 높은 안정성과 신뢰성      | 학습 곡선이 높아 초보자에게 어려울 수 있음 |
| 강력한 보안 기능        | 하드웨어 드라이버 지원이 제한적일 수 있음  |
| 커뮤니티 지원 및 풍부한 자료 | 특정 응용 프로그램의 부족           |
| 다양한 배포판 선택 가능    | 공식적인 기술 지원 부족 (커뮤니티에 의존) |

### 다른 운영체제와의 차이점

#### 윈도우즈와 다른 점

| 비교 항목         | 리눅스                          | 윈도우즈                          |
|-------------------|--------------------------------|----------------------------------|
| 소스 코드 접근    | 오픈 소스                      | 소스 코드 비공개                  |
| 비용              | 무료                           | 유료                             |
| 사용자 권한       | 다중 사용자, 세분화된 권한 관리 | 기본 사용자, 관리자 권한 구분     |
| 보안              | 높은 보안성                    | 보안 취약점 빈번                 |
| 소프트웨어 설치   | 패키지 관리자 사용               | 설치 파일 사용                     |

#### 유닉스와 다른 점

| 비교 항목    | 리눅스          | 유닉스           |
| -------- | ------------ | ------------- |
| 개발자      | 리누스 토르발스     | AT&T 벨 연구소    |
| 소스 코드 접근 | 오픈 소스        | 상용, 제한적 오픈 소스 |
| 배포판      | 다양           | 특정 상용 배포판 위주  |
| 하드웨어 지원  | 광범위한 하드웨어 지원 | 제한된 하드웨어 지원   |
| 커뮤니티 지원  | 활발한 커뮤니티     | 제한적 커뮤니티 지원   |


### 국내외 리눅스 배포판의 특징
- 리눅스 계보도[^1]

#### 국내외 주요 리눅스 배포판

| 배포판             | 설명                                        |
| --------------- | ----------------------------------------- |
| 우분투 (Ubuntu)    | 사용자 친화적, 데스크톱 및 서버용으로 인기                  |
| 페도라 (Fedora)    | 최신 기술 도입이 빠름, 개발자 커뮤니티가 활발                |
| 센토스 (CentOS)    | 기업용 서버에서 인기, Red Hat Enterprise Linux와 호환 |
| 데비안 (Debian)    | 안정성과 보안성이 높음, 다양한 파생 배포판 존재               |
| 하모니카 (HamoniKR) | 한국에서 개발된 배포판, 한글 지원이 뛰어남                  |

### 리눅스 디렉토리 종류와 특징

#### 디렉토리 구조

| 디렉토리 | 설명                                                        |
|----------|-------------------------------------------------------------|
| /        | 루트 디렉토리, 모든 디렉토리의 최상위                       |
| /bin     | 기본 명령어 파일이 위치                                      |
| /etc     | 설정 파일이 위치                                             |
| /home    | 사용자 홈 디렉토리                                           |
| /lib     | 시스템 라이브러리 파일이 위치                                |
| /usr     | 사용자 응용 프로그램 및 파일이 위치                          |
| /var     | 로그 파일 및 가변 데이터가 위치                              |

#### 디렉토리의 종류와 특징

| 디렉토리 | 설명                                                        |
|----------|-------------------------------------------------------------|
| /boot    | 부팅에 필요한 파일들이 위치                                  |
| /dev     | 장치 파일이 위치                                             |
| /mnt     | 임시 마운트 지점                                             |
| /proc    | 프로세스 정보가 위치, 가상 파일 시스템                        |
| /tmp     | 임시 파일들이 위치                                            |
| /sbin    | 시스템 관리 명령어 파일이 위치                                 |
| /srv     | 서비스 데이터가 위치                                          |

# CentOS 설치
### 파티션
- 저장장치를 논리적으로 나누어 관리하는 방법
- 주로 ext4 파일 시스템 사용

| 파티션 유형                                      | 목적                                              |
| ------------------------------------------- | ----------------------------------------------- |
| 부트 파티션 (Boot Partition)                 | 시스템 부팅에 필요한 파일 저장<br>부트 로더가 설치되고 부팅 관련 파일 저장    |
| 루트 파티션 (Root Partition)                 | CentOS 시스템의 모든 파일 및 디렉토리가 저장되는 곳<br>루트 (/) 디렉토리 |
| 스왑 파티션 (Swap Partition)                 | 가상 메모리를 위한 공간으로, RAM이 부족할 때 시스템 성능을 유지하기 위해 사용  |
| 홈 파티션 (Home Partition)                  | 사용자 데이터와 설정 파일들을 저장하는 공간<br>사용자 계정의 홈 디렉토리      |
| 기타 데이터 파티션 (Additional Data Partitions) | 필요에 따라 사용자가 추가적으로 정의하는 데이터를 저장하는 파티션            |

### Kdump
- 시스템이 비정상적으로 종료되거나 패닉 상태에 돌입했을 때, 시스템 메모리 덤프를 생성하는 Linux 커널 메커니즘
- 디버깅 및 분석을 위해 필요
#### 설치
```
sudo yum install kexec-tools crash
```

#### 활성화
```
systemctl enable kdump.service
```

#### Kdump 설정 파일 편집
```
vi /etc/kdump.conf
```

- 사용할 메모리 크기 설정: 예를 들어, `mem=` 옵션을 사용하여 Kdump가 사용할 메모리 크기를 지정
- 덤프 파일 저장 위치: `path=` 옵션을 사용하여 덤프 파일을 저장할 경로를 설정
- 덤프 파일 이름 포맷: `core_collector=` 옵션을 사용하여 덤프 파일의 이름 포맷을 설정

> e.g. 
```
path /var/crash
core_collector makedumpfile -c --message-level 1 -d 31
```

- 설정 적용을 위해 서비스 재시작 필요
- 재시작 후에 `/var/crash` 디렉토리에 덤프 파일이 생성되어야 함

### 네트워크 및 호스트 이름 설정

#### 네트워크 설정
- 네트워크 연결 확인: 현재 시스템의 네트워크 연결 상태

```bash
nmcli connection show
```

- 네트워크 연결 설정: 새로운 연결을 추가하거나 기존 연결을 수정할 수 있음. 

```bash
#이더넷 연결을 추가하는 방법
sudo nmcli connection add type ethernet con-name MyEthernet ifname eth0
```
- `MyEthernet` 연결 이름
- `eth0` 인터페이스 이름

- IP 주소 할당: DHCP를 통해 자동으로 IP 주소를 할당 받거나, 수동으로 IP 주소를 설정

```bash
#IPv4 주소, 게이트웨이 및 DNS 서버를 설정하고 연결을 활성화
sudo nmcli connection modify MyEthernet ipv4.addresses 192.168.1.100/24
sudo nmcli connection modify MyEthernet ipv4.gateway 192.168.1.1
sudo nmcli connection modify MyEthernet ipv4.dns "8.8.8.8 8.8.4.4"
sudo nmcli connection up MyEthernet
```


#### 호스트 이름 설정

 - 호스트 이름 설정 파일 : `/etc/hostname`

- 현재 호스트 이름 확인:

```bash
hostnamectl
```


- 호스트 이름 변경:

```bash
sudo hostnamectl set-hostname new-hostname
```

-  `new-hostname` : 호스트 이름름

- 변경 사항 적용 확인:

```bash
hostnamectl
```

- 호스트 파일 업데이트:

호스트 이름과 관련된 설정을 `/etc/hosts` 파일에 반영. 호스트 이름과 IP 주소를 매핑하여 추가할 수 있음

```bash
sudo nano /etc/hosts
```

예시:

```
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
192.168.1.100   new-hostname.example.com new-hostname
```

- `192.168.1.100` : 시스템 IP
- `new-hostname.example.com` / `new-hostname` :설정한 호스트 이름

### GRUB (Grand Unified Bootloader)
- 대부분의 리눅스 배포판에서 시스템 부팅 시 사용
#### GRUB 설정 파일

- GRUB 설정 파일은 `/etc/default/grub`에 위치
- 파일을 편집하여 부팅 시 사용할 설정을 구성할 수 있음
- 변경 후에는 설정을 적용하기 위해 반드시 GRUB 설정을 재생성해야 함

- GRUB 설정 파일 편집:

  ```bash
  vi /etc/default/grub
  ```

  예시 설정 파일 내용:

  ```plaintext
  GRUB_TIMEOUT=5
  GRUB_DEFAULT=saved
  GRUB_DISABLE_SUBMENU=true
  GRUB_TERMINAL_OUTPUT="console"
  GRUB_CMDLINE_LINUX="crashkernel=auto rd.lvm.lv=centos/root rd.lvm.lv=centos/swap rhgb quiet"
  ```

  - `GRUB_TIMEOUT`: 부팅 메뉴가 표시되는 시간 (초)을 설정
  - `GRUB_DEFAULT`: 기본적으로 부팅할 항목을 설정
  - `GRUB_CMDLINE_LINUX`: 커널 부팅 옵션을 설정
     예시는 crashkernel, LVM 파티션 및 부팅 메시지 옵션을 추가한 것

#### GRUB 설정 적용

GRUB 설정을 변경한 후에는 설정을 적용하기 위해 다음 명령어를 실행

```bash
sudo grub2-mkconfig -o /boot/grub2/grub.cfg
```

이 명령어는 `/etc/default/grub` 파일에서 설정을 읽어와 `/boot/grub2/grub.cfg` 파일을 생성
이 파일은 실제 부팅 시 사용됨

#### 부트로더 설치 및 업데이트

- 부트로더 재설치 및 업데이트:

  ```bash
  sudo grub2-install /dev/sda
  ```

  `/dev/sda`는 부트로더가 설치된 디스크를 지정
  실제 시스템에 따라 다를 수 있으며, 주로 첫 번째 디스크에 부트로더가 설치되어 있음

#### 4. 부트로더 설정 확인

```bash
sudo grub2-editenv list
```

이 명령어는 현재 GRUB 설정 환경 변수를 나열함

### 주의사항

- 부트로더 설정 변경 시 주의
- 커널 업데이트 후 부트로더 재설치: 새로운 커널을 설치한 경우에는 반드시 해당 커널에 대해 `grub2-mkconfig`와 `grub2-install` 명령어를 실행하여 부트로더를 업데이트해야 함

### 부팅 과정
![[Pasted image 20240719030636.png]]
- BIOS 또는 UEFI 초기화:
    
    - 시스템 전원이 켜지면, BIOS 또는 UEFI가 실행됩니다.
    - 기본 입력 및 출력 시스템을 초기화하고, 시스템의 기본 하드웨어 구성을 확인합니다.
- 부트로더 로딩:
    
    - BIOS 또는 UEFI는 부트로더 위치를 찾아 실행합니다.
    - 대표적으로 리눅스에서 사용하는 부트로더는 GRUB(Grand Unified Bootloader)입니다.
    - 부트로더는 사용자가 선택한 운영 체제 또는 커널 이미지를 로딩합니다.
- 커널 로딩:
    
    - 부트로더가 선택된 커널 이미지를 찾아 메모리로 로딩합니다.
    - 커널은 시스템의 핵심 기능을 제공하며, 시스템 자원과 하드웨어를 초기화합니다.
- Init 시스템 실행:
    
    - 커널이 로드된 후, init 시스템(보통 systemd 혹은 SysVinit)이 실행됩니다.
    - init 시스템은 다양한 서비스 및 프로세스를 초기화하고 관리합니다.
- 사용자 공간 서비스 시작:
    
    - 사용자 공간에서 필요한 서비스들이 시작됩니다.
    - 예를 들어, 네트워크 서비스, 그래픽 인터페이스, 파일 시스템 마운트 등이 이 단계에서 처리됩니다.
- 로그인 화면 또는 콘솔 터미널 제공:
    
    - 사용자 인터페이스(GUI)를 제공하는 경우, 그래픽 로그인 화면이 나타납니다.
    - 텍스트 모드의 경우, 콘솔 터미널이 사용자에게 제공됩니다.

### X 윈도우
- Unix 및 Unix 계열 운영 체제에서 그래픽 사용자 인터페이스(GUI)를 제공하는 표준이자 프로토콜.

### 개념

1. X 서버 (X Server):
   - X 윈도우 시스템의 핵심 구성 요소로, 그래픽 하드웨어와 상호 작용하여 그래픽 화면을 생성 및 표시
   - 클라이언트 프로그램에서 요청하는 그래픽 화면 출력 관리

2. X 클라이언트 (X Client):
   - X 서버에 접속하여 그래픽 출력을 요청하는 프로그램
   - 예를 들어, 웹 브라우저, 텍스트 편집기, 파일 관리자 등이 X 클라이언트로 작동할 수 있음

3. X 윈도우 매니저 (Window Manager):
   - X 윈도우 시스템에서 창 관리를 담당하는 소프트웨어
   - 창의 위치, 크기, 외관 등을 관리하며, 사용자 인터페이스의 일관성을 제공

### 특징

1. 네트워크 투명성 (Network Transparency):
   - X 윈도우는 네트워크를 통해 원격에서도 사용할 수 있음
   - X 클라이언트와 X 서버가 네트워크를 통해 통신하며, 클라이언트 프로그램이 원격 서버에서 실행되어도 로컬에서 실행하는 것과 동일한 방식으로 동작함

2. 다중 화면 지원:
   - X 윈도우 시스템은 다중 화면을 지원하여 여러 개의 모니터를 동시에 사용 가능
   - 각 화면은 독립적인 X 서버 인스턴스로 관리될 수 있음음

3. 확장성과 유연성:
   - X 윈도우는 다양한 프로그램과 라이브러리를 통해 확장성과 유연성을 제공
   - 다양한 창 관리자와 테마를 선택할 수 있어 사용자의 취향에 맞는 환경을 설정할 수 있음

4. 기존 Unix 시스템 호환성:
   - X 윈도우는 Unix 시스템의 전통을 이어받아서 기존의 Unix 프로그램과 통합 가능
   - 이는 Unix 계열 운영 체제에서 긴 역사를 가진 프로그램들을 X 윈도우 환경에서도 실행할 수 있음

5. 높은 자유도와 커스터마이징 가능성:
   - 사용자는 X 윈도우 시스템에서 많은 부분을 자신의 취향에 맞게 설정하고 커스터마이징 가능
   - 창 관리자 선택, 테마 설정, 단축키 지정 등 다양한 설정이 가능

### 터미널
- CLI (Command line Interface)

### 원격 접속
- VNC: 그래픽 기반 원격 접속, GUI 환경 접속에 유용.
- SSH: 텍스트 기반 원격 접속, 보안성이 높고 다양한 시스템 관리에 활용됨.
- Telnet: 텍스트 기반 원격 접속, 보안이 약하므로 현재는 권장되지 않음.

#### VNC (Virtual Network Computing)

특징:

- 그래픽 기반 원격 접속 프로토콜
- 플랫폼 독립적
- 암호화 지원: 최신 VNC 클라이언트와 서버는 데이터 전송 시 SSL/TLS를 사용하여 암호화 지원
- 기본 포트 : TCP 5900 ~ 5902

사용 용도:

- 원격으로 GUI 환경에 접속하여 그래픽 애플리케이션을 실행하고 관리
- 시스템 관리자가 원격으로 사용자 데스크탑을 보고 문제 해결을 지원할 때 사용될 수 있음

#### SSH (Secure Shell)

특징:

- 암호화된 텍스트 기반 접속 프로토콜
- 보안: 데이터 전송 과정에서 암호화를 지원하여 보안성이 매우 높음
- 포트 포워딩: 로컬 머신과 원격 시스템 사이의 네트워크 포트를 연결하여 서비스를 안전하게 제공
- 기본 포트 : TCP 22

사용 용도:

- 원격 서버에 터미널로 접속하여 파일 관리, 명령어 실행, 서버 관리 등을 할 때 주로 사용
- 데이터 전송 및 원격 시스템 관리에서 널리 사용

#### Telnet (Telecommunication Network)

특징:

- 비 보안 텍스트 기반 접속 프로토콜: Telnet은 원격 시스템에 접속하여 명령어를 실행할 수 있는 프로토콜
- 데이터 전송 과정에서 암호화가 없어 보안성이 낮음
- 기본 포트 : TCP 23

사용 용도:

- 과거에는 원격 접속의 주요 수단이었으나, 보안상의 문제로 대체 수단을 사용
- 네트워크 장비나 서버와 같이 보안이 크게 신경 쓰이지 않는 환경에서 사용될 수 있음
### 실습





# See Also
- [Unix의 역사](https://namu.wiki/w/UNIX/%EC%97%AD%EC%82%AC#s-3)
- [Linux](https://namu.wiki/w/Linux#s-2)

# 각주
[^1]: [리눅스 계보도](https://upload.wikimedia.org/wikipedia/commons/1/1b/Linux_Distribution_Timeline.svg)
